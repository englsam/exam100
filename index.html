<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<!-- ============  JQUERY    ================ -->	
   
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>


	<!-- ============ BOOTSTRAP ================ -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	
	<!-- ============ SWEET ALERT ================ -->	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.all.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.css"/>

    <link rel="stylesheet" href="css/main.css">
  
	

<title>Exam100</title>	
</head>




<body>

    <style>
		/*====== 컨트롤패널 ======= */
		#cntl_panel_outer{			
			width:100%; 
			margin:0 auto;
			height:72px; 
			position: sticky;
			top: 0;

			-webkit-box-shadow: 0 1px 2px 0 #777;
			 box-shadow: 0 1px 2px 0 #777;
			 background-color:white;
		}
		#cntl_panel_inner{			
			
			width: 25cm; 
			height:70px;
			margin:0 auto;
			height:70px;
			text-align:center;
			padding-top:20px;		
		}
		.cntl_inner2{

			display:inline-block;
			text-align:center;
			margin-right:20px;
			
		}
	</style>

	<style>
		table#incontent_table{border:#8c8c8c 1px solid; width:100%; margin-bottom:10px; margin-top:5px; }
		table#incontent_table td{ padding:3px; }	
		.bottom_class{ 	border:#8c8c8c 1px solid;
					    padding: 5px;
						background-color: lightsteelblue;				
		}		
		
	</style>


<!-- ============  control page div ================== -->

<div id="cntl_panel_outer" class="noPrint">
	<div id="cntl_panel_inner" >        
        <div class="cntl_inner2" >
			<button type="button" class="btn btn-info" id="add_one"><span style="font-size:12px;">하나씩 증가</span></button>
		</div>

        <div class="cntl_inner2" >
			<button type="button" class="btn btn-info" id="print_all"><span style="font-size:12px;">프린트</span></button>
		</div>	
	</div>
</div>

<!-- =================================================  -->

<script>
$(document).on('click', '#add_one', function() {		// 정답을 클릭하면

	var class_len =  $('.contentA').length;
	var this_id ='contentA_'+class_len;

	var row = $('.newspaper').eq(0);
    var contents = '<div id="15394_contents" class="contents group_15394 red" contenteditable="true"><table class="incontent_table" id="incontent_table">';
		contents += '<tbody><tr><td class="incontent_td" id="td0_1" contenteditable="true">북한에서 신종 코로나바이러스 감염증(코로나19)의 확산이 본격화되는 가운데 열악한 의료시스템, 물자 부족 등으로 북한이 참담한 상황에 직면할 수 있다고 BBC가 15일(현지시간) 보도했다.이날 북한은 지난 13일 저녁부터 14일 오후 6시까지 전국에서 29만6180명의 신규 발열자가 발생했다고 밝혔다. </td></tr></tbody></table>';
		contents += 'One day while driving my car, ddd ddd ddd ddd ddd ddd ddd ddd ddd ddd ddd ddd I kept noticing things that were wrong with all the other cars on the road.&nbsp; <span class="tcolor">(①)</span>';		
		contents += '&nbsp; But we can develop awareness and use anything that happens to us and others as great learning experiences.&nbsp; <span class="tcolor">(⑤)</span>';
		contents += '&nbsp; Instead of projecting negative traits onto others, look first inside to see if you have a trace of what you find so awful in others.&nbsp; &nbsp;</div>"';
		contents += '<div id="kkk1" class="bottom_class">In this tutorial, we look at justify-content: space-between in CSS Flexbox.The justify-content property in CSS Flexbox determines how space is distributed';
		contents += 'Extend the new LHR unlock functionality to ETH+ALPH dual mining, and ERGO single mode. LHR tune values are accurate, but once you found a value that is stable for your GPU, you can set it manually with --lhr-tune and get consistent results across miner restarts.	 </div> ';

    $('<div />', {
            'html'			    : contents,	           
            'class'			    : 'contentA',
			'id'				: this_id,
            'contenteditable'   :'true'
    }).appendTo(row);	
	
	console.log( '=====' + this_id +'=========');
	const el = document.querySelector('#'+this_id);  	
	const el2 = document.querySelector('.newspaper');  	
	const el3 = document.querySelector('.bottom_div');  	

	const divHeight = el.offsetHeight;
	const divTop = el.offsetTop;
	console.log('높이:'+divHeight);
	console.log('Top:'+divTop)
	console.log('newspaper높이:'+el2.offsetHeight)
	console.log('bottom_div y좌표:'+el3.offsetTop)

	if(overflow_check(row)=='overflowed'){
		console.log('높이:'+divHeight);
		console.log( '자식요소개수:'+$('#contentA_0').children.length );		
		}
	//console.log( document.querySelector("#newcon_1").clientHeight );
	//console.log( document.querySelector("#newcon_1").scrollHeight );
	/*
	var element = document.getElementById('newcon_1');
	var h = element.clientHeight;
	var w = element.scrollHeight;

		console.log( h +"/"+ w);
	*/
		/*	
	for(var j=0; j< $(".contentA").length; j++){
		var divEl = $('.contentA').eq(j);
    	var divY = divEl.offset().top;
		console.log( divY );
	 }
	 */
});

//////////  print //////////////////////////////////
$("#print_all").click(function(){	// print
	window.print();
});


function overflow_check( in_class ){		
	
		if (in_class.prop('scrollWidth') > in_class.width() ) {						
		//	$('#contentA_3').clone().appendTo( $('#newcon_2')) ;	
			add_page();
			return 'overflowed';
				
		}else{
			return '';
		}			
	}
</script>




<div class="book" id="book1">

	<div class="page pbs" id='page_1'>			
        <div class="subpage" id='subpage_1'>
			<div class="top_div">
					<div class="academy_name"></div>
					<div class="paper_name"></div>									
			</div>		
			<div class="newspaper" id='newcon_1'></div>	
			
			<div class="bottom_div">
					<div class="academy_name"></div>
					<div class="page_number">1</div>
			</div>		
			  
        </div>		
    </div>	

</div>
	
<style>
    .contentA{ 
        border: 1px blue solid;
        margin-bottom: 15px;
		padding: 5px;
        text-align:justify;
    }

</style>

</body>


<script>
$(document).ready(function() { 	

//	for(var i=0; i<10; i++){
//		add_page();
//	}
//	$('#page_0').remove();
});


function add_page(){		
		
		var last_page_name	= $(".page:last").attr('id');	// page_1
		var last_page_arr	= last_page_name.split('_');	
		var last_page_num	= last_page_arr[1];				// 1
		var new_id_n		= Number(last_page_num)+1;		// 2
		var next_id_name	= 'page_'+new_id_n;				// page_2

		var html = '<div class="page pbs" id='+"page_"+new_id_n+'>'+'</div>';	// page 삽입	
			($('#'+last_page_name)).after(html);
		var html = '<div class="subpage" id='+"subpage_"+new_id_n+'>'+'</div>';		// subpage 삽입
			($('#'+next_id_name)).append(html);

		var html = '<div class="top_div"><div class="academy_name">테스트</div><div class="paper_name">Lesson1</div>	</div>';		
			$('#subpage_'+new_id_n).append(html);	
		var html = '<div class="newspaper" id='+"newcon_"+new_id_n+'>'+'</div>';	// newspaper삽입	
			$('#subpage_'+new_id_n).append(html);
		var html = '<div class="bottom_div"><div class="academy_name">테스트</div><div class="page_number">'+new_id_n+'</div></div>';		
			$('#subpage_'+new_id_n).append(html);	
	}


</script>

</html>
